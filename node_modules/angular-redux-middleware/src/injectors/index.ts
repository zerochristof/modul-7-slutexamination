import {
  StaticInjector,
  setCurrentInjector,
  inject
} from '@angular/core/esm5/src/di/injector'

import React, { PureComponent } from 'react'
import Provider from '../providers'

import { identity } from 'lodash/identity'

const Action = (providers) => {
  const injectableDef = {
    ngInjectableDef: {
      provideIn: Provider,
      value: identity,
      deps: [React, PureComponent]
    }
  }

  setCurrentInjector(injectableDef)

  inject(identity, location.href)

  return new StaticInjector(providers, Provider, identity)
};

export default Action